import{d as N,s as w,u as I,c as V,a as d,F as k,r as x,b as B,e as u,o as l,f as _,t as v,g as $,h as g,_ as j,i as A,j as h,k as F,l as y,m as C}from"./index-KeMtHoIn.js";import{_ as E}from"./BackLink.vue_vue_type_style_index_0_lang-Bo7YNrWy.js";const G={class:"document-props"},O={class:"document-props__attr"},R={class:"document-props__value"},S=N({__name:"DocumentProps",props:{documentId:{}},emits:["getName","error"],setup(D,{emit:i}){const o=D,p=i,{attrDescription:r}=w(I()),f=()=>{const{getDocument:m}=B(),t=u(!1),s=u(),n=u({});return{fetchDoc:async()=>{try{t.value=!0;const c=await m(o.documentId);c&&(n.value=c.data,p("getName",n.value.ssa_name)),t.value=!1}catch(c){p("error",c),s.value=c}},doc:n,loading:t,error:s}},{fetchDoc:e,doc:a}=f();e();const b=V(()=>{const m=Object.keys(r.value);return Object.entries(a.value).filter(([t,s])=>m.includes(t)).map(([t,s])=>[r.value[t],$(t,s)])});return(m,t)=>(l(),d("table",G,[(l(!0),d(k,null,x(b.value,([s,n])=>(l(),d("tr",{key:s,class:"document-props__row"},[_("td",O,v(s),1),_("td",R,v(n),1)]))),128))]))}}),T={class:"document-view__error"},z=N({__name:"DocumentView",setup(D){const i=u(""),o=u(),r=(()=>{const e=C().params.id;return Array.isArray(e)?e[0]:e})();return(f,e)=>(l(),d(k,null,[g(E,{title:o.value?"На главную":void 0},null,8,["title"]),g(j,{title:i.value},null,8,["title"]),o.value?F("",!0):(l(),A(S,{key:0,"document-id":h(r),onError:e[0]||(e[0]=a=>o.value=a),onGetName:e[1]||(e[1]=a=>i.value=a)},null,8,["document-id"])),_("p",T,[y(" Документ с ID "),_("strong",null,'"'+v(h(r))+'"',1),y(" не найден ")])],64))}});export{z as default};
